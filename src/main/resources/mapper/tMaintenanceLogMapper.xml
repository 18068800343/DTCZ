<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ldxx.dao.tMaintenanceLogDao" >

    <insert id="addtMaintenanceLog" parameterType="tMaintenanceLog">
        insert into t_maintenance_log(log_id,log_time,log_user,log_content,del_state) values (#{logId},#{logTime},#{logUser},#{logContent},#{delState})
    </insert>

    <update id="deltMaintenanceLog">
        update t_maintenance_log set del_state=0 where log_id=#{id}
    </update>

    <update id="updtMaintenanceLog" parameterType="tMaintenanceLog">
        update t_maintenance_log set log_time=#{logTime},log_user=#{logUser},log_content=#{logContent} where log_id=#{logId}
    </update>

    <select id="getAlltMaintenanceLog" resultType="tMaintenanceLog">
        select a.log_id,a.log_time,a.log_user,a.log_content,a.del_state,b.Usr_Name from t_maintenance_log a
        left join t_user_info b on a.log_user=b.Usr_Id
        where a.del_state=1
    </select>

</mapper>
