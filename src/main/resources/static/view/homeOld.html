<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>首页</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="./css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <style>
        .main-table tr td{padding:3px;}
        .main-table .red{color:red;}

        @media screen and (min-width: 1920px) {
            .righttop{
                margin-top: -20% !important;
            }
            /* .righttop{
                 top:200px !important;
             }
             .rightbottom span{
                 margin-top: 1% !important;
             }*/
        }
    </style>
</head>
<body class="jd">
<div class="head" style="height: 100px;width: 100%;"></div>
<div class="leftdiv col-xs-3">
    <h2 class="jianceh" style="font-size: 19px;color:#007AFF;font-weight: bolder;">监测站点实时统计</h2>
    <div class="leftsj">
        <div class="leftfirst">
            <img src="img/first_img.png" style="height: 40px;">
            <p class="leftp" id="leftTable1"></p><span>辆</span>
            <p style="color: #A4A5B0;margin-left: 11%;font-weight: bolder;margin-top: -2%;">当前总流量</p>
        </div>
        <div class="leftsec">
            <img src="./img/second_img.png" style="height: 40px;">
            <p class="leftp" id="leftTable2"></p><span>辆</span>
            <p style="color: #A4A5B0;margin-left: 11%;font-weight: bolder;margin-top: -2%;">当前超载车辆数</p>
        </div>
        <div class="leftth">
            <img src="img/third_img.png" style="height: 40px;">
            <p class="leftp" id="leftTable3"></p><span>吨</span>
            <p style="color: #A4A5B0;margin-left: 11%;font-weight: bolder;margin-top: -2%;">当前最大车重</p>
        </div>
        <div class="leftfou">
            <img src="img/first_img.png" style="height: 40px;">
            <p class="leftp" id="leftTable4"></p><span>个</span>
            <p style="color: #A4A5B0;margin-left: 11%;font-weight: bolder;margin-top: -2%;">当前监测站点</p>
        </div>
        <div class="y-span10 y-last">
            <div class="table">
                <div class="bj_nav y-clearfix">
                    <div>
                        <div id="main" style="height:500px;width:100%;margin:0 15px;float:left;margin-left: -28%;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 左边结束 -->
<div class="centerdiv col-xs-4">
    <div class="topcenter">
        <div class="bg">
            <h2 class="dangqianche" style="font-size: 17px;color:#007AFF;font-weight: bolder; padding: 10px;">当前车流量统计</h2>
        </div>
        <div class="bz">
            <span style="float: left; margin-left: 2%;">站点排名</span>
            <span style="float: right;margin-right: 3%;">流量统计</span>
        </div>
        <div id="xian1" style="height:380px;top: -45px;">
        </div>
    </div>
    <div class="bottomcenter">
        <div class="bg" style="margin-top: -8%;">
            <h2 class="dangqianche" style="font-size: 16px;font-weight: bolder; padding: 10px;">当前车辆超载比例统计</h2>
        </div>
        <div id="xian" style="height:360px;top: -45px;">
            <div id="huan0" class="col-xs-4" style="height: 160px;position: absolute;"></div>
            <div id="huan1" class="col-xs-4" style="height: 160px;position: absolute; margin-left: 30%;"></div>
            <div id="huan2" class="col-xs-4" style="height: 160px;float: right;position: absolute;right: 0;">
            </div>
            <div class="ecs" style="margin-top: 30%;">
                <div id="huan3" class="col-xs-4" style="height: 160px;position: absolute;"></div>
                <div id="huan4" class="col-xs-4" style="height: 160px;position: absolute; margin-left: 30%;"></div>
                <div id="huan5" class="col-xs-4" style="height: 160px;position: absolute;right: 0;"></div>
            </div>
        </div>
    </div>
</div>
<!-- 中间结束 -->
<div class="right col-xs-3">
    <div class="bg">
        <h2 class="dangqianche" style="font-size: 17px;color:#007AFF;font-weight: bolder;padding: 10px;">当前车辆预警统计</h2>
    </div>
    <div class="righttop" style="margin-top: -10%;position: relative;">
        <div id="by0" class="col-xs-4" style="height:200px;position: absolute;float: left;"></div>
        <div id="by1" class="col-xs-4" style="height:200px;margin-left:32%;position: absolute;"></div>
        <div id="by2" class="col-xs-4" style="height:200px;float: right;"></div>
    </div>
    <div class="ert" style="margin-top: 40%;position: relative;">
        <div id="by3" class="col-xs-4" style="height:200px;position: absolute;"></div>
        <div id="by4"  class="col-xs-4"style="height:200px;position: absolute;margin-left: 32%;"></div>
        <div id="by5"  class="col-xs-4"style="height:200px;position: absolute;right: 0;"></div>
    </div>
    <div class="rightbottom" style="clear: both; position: relative;top: 140px;">
        <p style="font-size: 17px;color: #FFF;margin-top:10%;" class="col-xs-8">当前最大车重<span id="lastZuiDaCheZhong" style="color: #FE545E;font-size: 25px;background-color:#131A50;padding: 1.5%;margin: 1%;"></span>吨</p>

    </div>
    <div id="liti" class="col-xs-12" style="height: 325px; margin-top: 43%;">
    </div>
</div>
</body>
<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script src="js/homeEcharts.js" type="text/javascript" charset="utf-8"></script>
<script src="js/echarts.min(1).js" type="text/javascript" charset="utf-8"></script>
<script src="js/build/dist/echarts.js" type="text/javascript" charset="utf-8"></script>


<script type="text/javascript">
    require.config({
        paths: {
            echarts: 'js/build/dist'
        }
    });

    // 使用
    require(
        [
            'echarts',
            'echarts/chart/map'
        ],
        function(ec) {
            require('echarts/util/mapData/params').params.jiangsu = {

                getGeoJson: function(callback) {
                    $.getJSON('geoJson/jiangsu.json', function(data) {
                        // 压缩后的地图数据必须使用 decode 函数转换
                        callback(require('echarts/util/mapData/params').decode(data));
                    });
                }
            }
            let myChart = ec.init(document.getElementById('main'));
            let ecConfig = require('echarts/config');
            let zrEvent = require('zrender/tool/event');
            let curIndx = 0;
            let mapType = ["江苏"];

            myChart.on(ecConfig.EVENT.MAP_SELECTED, function(param) {});
            option = {

                tooltip: {
                    trigger: 'item',
                    //formatter:'dede{b}'
                    formatter: function(param) {}
                },
                legend: {
                    orient: 'vertical',
                    x: '',
                    data: [' ']
                },

                series: [{
                    name: '',
                    type: 'map',
                    symbolSize: 10,
                    symbolRotate: 35,
                    mapType: 'jiangsu',
                    selectedMode: false,
                    itemStyle: {
                        normal: {
                            label: {
                                show: true
                            },
                            borderColor: 'rgb(71,160,192)',
                            borderWidth: 1
                        },
                        emphasis: {
                            label: {
                                show: false
                            }
                        }
                    },
                    data: [{
                        name: '连云港市',
                        value: Math.round(Math.random() * 500)
                    },
                        {
                            name: '盐城市',
                            value: Math.round(Math.random() * 500)
                        },
                        {
                            name: '宿迁市',
                            value: Math.round(Math.random() * 500)
                        },
                        {
                            name: '徐州市',
                            value: Math.round(Math.random() * 500)
                        },
                        {
                            name: '南京市',
                            value: Math.round(Math.random() * 500)
                        },
                        {
                            name: '泰州市',
                            value: Math.round(Math.random() * 500)
                        },
                        {
                            name: '扬州市',
                            value: Math.round(Math.random() * 500)
                        },
                        {
                            name: '南通市',
                            value: Math.round(Math.random() * 500)
                        },
                        {
                            name: '苏州市',
                            value: Math.round(Math.random() * 500)
                        },
                        {
                            name: '无锡市',
                            value: Math.round(Math.random() * 500)
                        },
                        {
                            name: '镇江市',
                            value: Math.round(Math.random() * 500)
                        },
                        {
                            name: '常州市',
                            value: Math.round(Math.random() * 500)
                        },
                        {
                            name: '淮安市',
                            value: Math.round(Math.random() * 500)
                        }],
                    geoCoord: {
                        '南京市': [118.78	, 32.04],
                        '南通市': [121.05	, 32.08],
                        '无锡市': [120.29, 31.59],
                        '镇江市': [119.44, 32.2],
                        '常州市': [119.95, 31.79],
                        '淮安市': [119.15, 33.5],
                        '苏州市': [120.62, 31.32],
                        '扬州市': [119.42, 32.39],
                        '泰州市': [119.9, 32.49],
                        '徐州市': [117.2, 34.26],
                        '宿迁市': [118.3, 33.96],
                        '盐城市': [120.13, 33.38],
                        '连云港市': [119.16, 34.59]
                    },

                    markPoint: {
                        symbol: 'emptyCircle',
                        symbolSize: 15,
                        itemStyle: {
                            normal: {
                                borderColor: '#f317eb',
                                borderWidth: 1, // 标注边线线宽，单位px，默认为1
                                label: {
                                    show: true
                                }
                            }
                        },
                        effect: {
                            show: true,
                            shadowBlur: 0,
                            loop: true
                        },
                        data : [
                            {
                                name: '南京市',
                                value: 95
                            },
                            {
                                name: '连云港市',
                                value: 2
                            },
                            {
                                name: '宿迁市'
                            },
                            {
                                name: '徐州市'
                            },
                            {
                                name: '无锡市'
                            }
                        ]
                    }

                }]
            }
            myChart.setOption(option);
        }
    );


    //初始化车流量
    homePageInit.initLeftEcharts('xian1');

    //初始化环形图0
    homePageInit.initDownEcharts();
    homePageInit.initLastEcharts()

    //初始化左侧总数据
    homePageInit.initHomeData();
    setInterval(refresh, 1000);
    setInterval(refreshLeft, 4000);

    function refresh() {
        homePageInit.initLeftEcharts('xian1');
        homePageInit.initDownEcharts();
        //
        homePageInit.initLastEcharts()
    }

    function refreshLeft() {
        homePageInit.initHomeData();
    }

</script>

</html>
