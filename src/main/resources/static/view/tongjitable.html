<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link href="../style/bootstrap.min.css" rel="stylesheet"/>
    <!--<link href="../font3/bootstrap-select.css" rel="stylesheet">-->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/css/bootstrap-select.min.css">
    <link href="../font2/iconfont.css" rel="stylesheet">
    <link rel="stylesheet" href="../style/jquery.dataTables.min.css">
    <link href="../style/style.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/home.css"/>
    <!--<link rel="stylesheet" type="text/css" href="css/layui.css" />-->
    <link rel="stylesheet" href="css/toastr.css"/>
    <style>
        #mainContent_info {
            margin-left: 5%;
        }

        #mainContent_paginate {
            margin-right: 5%;
        }

        .xian {
            margin-top: 3.5%;
        }

        @media screen and (max-width: 1400px) {
            .mask-loading {
                top: 40% !important;
            }
        }

        @media screen and (max-width: 1366px) {
            .zhongliang {
                width: 8%;
                margin-left: 3%;
            }

            .text1 {
                width: 100px !important;
            }

            .text2 {
                width: 100px;
            }

            .col1 {
                margin-left: 2% !important;
            }

            .riqi {
                margin-left: 5% !important;
            }

            .chexing {
                margin-left: 10% !important;
            }

            .shaixuan {
                margin-left: 3%;
                width: 8%;
            }

            .chepai {
                width: 10% !important;
            }

            .jiancezhandian {
                right: 18% !important;
                position: relative;
            }

            .queding {
                margin-right: 15% !important;
            }

            .xian {
                margin-top: 4.5%;
            }

            .chesu {
                margin-left: 3% !important;
                width: 8% !important;
            }

            .text3 {
                width: 100px !important;
            }

            .text4 {
                width: 100px !important;
            }

            .xian2 {
                margin-left: 13% !important;
            }

            .zhousu {
                margin-left: 5% !important;
            }

            .text5 {
                width: 100px !important;
            }

            .lumianwendu {
                margin-left: 1% !important;
                width: 8% !important;
            }

            .text6 {
                width: 100px !important;
                margin-left: -2% !important;
            }

            .text7 {
                width: 100px !important;
            }

            .lmwd {
                margin-left: -1.5%;
            }

            .chaozhongbili {
                margin-left: 5% !important;
                width: 8% !important;
            }

            .text8 {
                width: 100px !important;

            }

            .text9 {
                width: 100px !important;
            }

            .czbl {
                width: 4% !important;
            }

            .bl {
                margin-left: 1% !important;
            }
        }
    </style>
</head>
<body style="background-image: none;">
<div class="form-group" id="rightTab">
    <div id="mainVm">
        <div class="sele">
        <div class="top_main">
            <label class="col-sm-2 control-label zhongliang">重量范围</label>
            <div class="col-sm-2">
                <!-- 样式1 -->
                <input type="text" class="text1" value="请输入" v-model="startWeight" @input="checknum('startWeight')"
                       style="height: 34px;border-radius: 5px;box-shadow: none;width: 250%;border:1px solid #DDD;padding:3px;">
            </div>

            <div class="col-sm-2 col1" style="margin-left: 6%;">
                <div class="xian2"
                     style="width: 10px;height: 2px;background-color: #DEDEDE;position: absolute;margin-left: 8%;margin-top: 15%;">
                </div>
                <input type="text" class="text2" value="请输入" v-model="endWeight" @input="checknum('endWeight')" style="height: 34px;border-radius: 5px;box-shadow: none;width:
        250%;margin-left: 30px;border:1px solid #DDD;padding:3px;">
            </div>
        </div>

        <label class="col-sm-1	 control-label riqi"
               style="margin-left: 9%;width: 70px;line-height: 30px;">日期:</label>
        <div class="col-sm-2">
            <!-- 样式1 -->
            <select value="请选择" class="selectpicker" multiple data-max-options="1" data-live-search="true" @change="formatTimeRange" v-model="timeRange" id="timeRange"
                    style="height: 34px; border-radius: 5px; box-shadow: none; margin-left: 30px; border: 1px solid rgb(221, 221, 221);">
                <option value="">全部</option>
                <option value="7">最近一周</option>
                <option value="30">最近一个月</option>
                <option value="60">最近二个月</option>
                <option value="90">最近三个月</option>
                <option value="180">最近半年</option>
                <option value="365">最近一年</option>
            </select>
        </div>

        <button type="button" class="btn btn-primary jiancezhandian" onclick="nowJianceSite()" data-toggle="modal"
                data-target="#jianceDiv"
                style="width: 110px; position:relative;top:43px;right:5%;background-image: linear-gradient(#1F62C8,#262E9F);">
            当前监测站点
        </button>
        <div class="col-sm-2" style="margin-left: 6%;">
        </div>
        <label class="col-sm-1	 control-label chexing"
               style=" width: 70px; line-height: 30px;">车型:</label>

        <div class="col-sm-2" style="margin-left: 1%;">
            <div class="xian2"
                 style="width: 10px; height: 2px; background-color: rgb(222, 222, 222); position: absolute; margin-left: 5%; margin-top: 15%;"></div>
            <select value="请选择" class="selectpicker" multiple data-max-options="1" data-live-search="true" id="chexing"
                    style="height: 34px; border-radius: 5px; box-shadow: none; margin-left: 30px; border: 1px solid rgb(221, 221, 221);">
                <option value="">全部</option>
                <option value="2">2轴车</option>
                <option value="3">3轴车</option>
                <option value="4">4轴车</option>
                <option value="5">5轴车</option>
                <option value="6">6轴车</option>
            </select>
        </div>

        <div class="sele">
            <label for="" class="col-sm-2 control-label shaixuan">筛选站点</label>
            <div class="col-sm-2" style="width: 29%">
                <!-- 样式1 -->
                <select class="form-control selectpicker" multiple data-actions-box="true" data-max-options="2"
                        data-live-search="true"
                        id="zhandian" style="width:80%;">
                </select>
            </div>
            <div class="jiance">
                <button type="button" class="btn btn-primary queding" @click="searchInit"
                        style="width: 110px; background-image: linear-gradient(#1F62C8,#262E9F);float:right;margin-right:13%;">
                    确定
                </button>

            </div>
        </div>
        <div style="position:relative;">
            <label for="" class="col-sm-2 control-label" style="margin-left:-5px;">车牌号</label>
            <div class="col-sm-2 chepai" style="width: 29%">
                <!-- 样式1 -->
                <input type="text" value="请输入" v-model="chepai"
                       style="border-radius: 5px;box-shadow: none;border:1px solid #DDD;padding:3px; margin-left:-9%;height:34px;">
            </div>
        </div>
        <input type="button" id="but" onclick="but2()" class="button" value="更多条件"
               style="right:8%;position:absolute;background-color:white;height:34px;border:1px solid #DEDEDE;">


        <div class="mydiv" style="clear:both;margin-top:10px;display:none;">

            <div class="sele">
                <label for="" class="col-sm-2 control-label chesu" style="margin-left:1%;">车速</label>
                <div class="col-sm-2">
                    <!-- 样式1 -->
                    <input type="text" class="text3" value="请输入" v-model="chesuStart" @input="checknum('chesuStart')"
                           style="height: 34px;border-radius: 5px;box-shadow: none;width: 120%;border:1px solid #DDD;padding:3px;">
                </div>

                <div class="col-sm-2">
                    <div class="xian2"
                         style="width: 10px;height: 2px;background-color: #DEDEDE;position: absolute;margin-left: -5%;margin-top: 15%;">
                    </div>
                    <input type="text" class="text4" value="请输入" v-model="chesuEnd" @input="checknum('chesuEnd')"
                           style="height: 34px;border-radius: 5px;box-shadow: none;width:120%;margin-left: 30px;border:1px solid #DDD;padding:3px;">
                </div>
            </div>
            <!-- 轴数 -->
    <!--  <label for="" class="col-sm-2 control-label zhousu" style="margin-left:3%;width:5%;display: none;">轴数</label>
            <div class="col-sm-2" style="display: none;">
                <input type="text" class="text5" value="请输入" v-model="zhoushu" @input="checknum('zhoushu')"
                       style="border-radius: 5px;box-shadow: none;border:1px solid #DDD;padding:3px; ;height:34px;margin-left:-20px;">
            </div>-->
            <!--  路面温度 -->
            <div class="sele">
                <label for="" class="col-sm-2 control-label lumianwendu" style="margin-left:3%;">路面温度</label>
                <div class="col-sm-2 lmwd">
                    <!-- 样式1 -->
                    <input type="text" class="text6" value="请输入" v-model="roadTmpStart"
                           @input="checknum('roadTmpStart')"
                           style="height: 34px;border-radius: 5px;box-shadow: none;width: 120%;border:1px solid #DDD;padding:3px;">
                </div>

                <div class="col-sm-2">
                    <div class="xian2"
                         style="width: 10px;height: 2px;background-color: #DEDEDE;position: absolute;margin-left: -5%;margin-top: 15%;">
                    </div>
                    <input type="text" class="text7" v-model="roadTmpEnd" value="请输入" @input="checknum('roadTmpEnd')"
                           style="height: 34px;border-radius: 5px;box-shadow: none;width:120%;margin-left: 30px;border:1px solid #DDD;padding:3px;">
                </div>
            </div>
            <div class="sele">
                <!-- 超重比例 -->
                <label for="" class="col-sm-2 control-label chaozhongbili" style="margin-left:3%;">是否超重</label>
                <div class="col-sm-2 czbl" style="width: 10%">
<!--                    <input type="text" class="text8" value="请输入" v-model="chaozhongStart"
                           @input="checknum('chaozhongStart')"
                           style="border-radius: 5px;box-shadow: none;border:1px solid #DDD;padding:3px; ;height:34px;margin-left:-40px;">-->
                    <select value="请选择" class="text8" data-live-search="true"  v-model="chaozhongStart"
                            style="border-radius: 5px;box-shadow: none;border:1px solid #DDD;padding:3px; ;height:34px;margin-left:-40px;">
                        <option value="">全部</option>
                        <option value="1">超重</option>
                    </select>
                </div>
    <label class="col-sm-1	 control-label riqi" style="width: 70px;line-height: 30px; margin-left:-6%;">日期:</label>
        <div class="col-sm-2">
            <!-- 样式1 -->
            <input type="date" v-model="startTime" value="请选择"
                   style="height: 34px;border-radius: 5px;box-shadow: none;width: 250%;border:1px solid #DDD;">
        </div>

        <div class="col-sm-2" style="margin-left: 6%;">
            <div class="xian2"
                 style="width: 10px;height: 2px;background-color: #DEDEDE;position: absolute;margin-left: 8%;margin-top: 15%;">
            </div>
            <input type="date" v-model="endTime" value="请选择" style="height: 34px;border-radius: 5px;box-shadow: none;width:
        250%;margin-left: 30px;border:1px solid #DDD;">
<!--                <div class="col-sm-2 bl" style="margin-left:-1%;">
                    <div class="xian2"
                         style="width: 10px;height: 2px;background-color: #DEDEDE;position: absolute;margin-left: -5%;margin-top: 15%;">
                    </div>
                    <input type="text" class="text9" v-model="chaozhongEnd" value="请输入"
                           @input="checknum('chaozhongEnd')" style="height: 34px;border-radius: 5px;box-shadow: none;width:
            120%;margin-left: 30px;border:1px solid #DDD;padding:3px;">
                </div>-->
            </div>
             <div class="sele" style="position:absolute;width:100%;top:9.5%;">
                <label for="" class="col-sm-2 control-label chesu" style="margin-left:1%;">车长</label>
                <div class="col-sm-2">
                    <!-- 样式1 -->
                    <input type="text" class="text3" value="请输入" v-model="chesuStart" @input="checknum('chesuStart')"
                           style="height: 34px;border-radius: 5px;box-shadow: none;width: 120%;border:1px solid #DDD;padding:3px;">
                </div>

                <div class="col-sm-2">
                    <div class="xian2"
                         style="width: 10px;height: 2px;background-color: #DEDEDE;position: absolute;margin-left: -5%;margin-top: 15%;">
                    </div>
                    <input type="text" class="text4" value="请输入" v-model="chesuEnd" @input="checknum('chesuEnd')"
                           style="height: 34px;border-radius: 5px;box-shadow: none;width:120%;margin-left: 30px;border:1px solid #DDD;padding:3px;">
                </div>
            </div>
        </div>
        </div>
    </div>
        <div class="xian" style="position:relative;margin-top:5.5%;"></div>
    <!--表格-->
    <table class="table table-striped table-hover" id="mainContent"
           style="width: 90%;margin: 0 auto; margin-top: 20px;">
        <thead style="background-color: #DDE6F7;">
        <tr>
            <th style="width: 15%">站点</th>
            <th>车道号</th>
            <th>车牌号</th>
            <th>车牌颜色</th>
            <th>长</th>
            <th>车速(Km/h)</th>
            <th>轴数</th>
            <th>总重量(Kg)</th>
            <th>路面温度</th>
            <th>超重比率</th>
            <th>时间</th>
            <th>详情</th>
        </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<!-- allMsg -->
<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
     id="jianceDiv">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
                <h4 class="modal-title"><b>当前监测站点</b></h4>
            </div>
            <div class="modal-body">
                <div>
                    <form class="form-inline">
                        <table class="table table-bordered table-condensed" style="height: auto;" id="jianceTable">
                            <tbody>

                            </tbody>
                        </table>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
            </div>
        </div>
    </div>
</div>

<!-- allMsg1 -->
<div class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" id="allMsg1">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content"  id="lookWimMsgDiv">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" ><b>详细信息</b></h4>
            </div>
            <div class="modal-body">
                <div>
                    <form class="form-inline">
                        <table class="table table-bordered table-condensed" style="height: auto;" id="">
                            <tr>
                                <td>站点</td>
                                <td>{{stationNameRouteName}}</td>
                                <td>通行时间</td>
                                <td>{{evtTime}}</td>
                            </tr>
                            <tr>
                                <td>打包时间</td>
                                <td>{{msgTime}}</td>
                                <td>车道号</td>
                                <td>{{laneNo}}</td>
                            </tr>
                            <tr>
                                <td>车牌号</td>
                                <td>{{plate}}</td>
                                <td>车牌颜色</td>
                                <td>{{licensePlateColor}}</td>
                            </tr>
                            <tr>
                                <td>车型</td>
                                <td>{{vehicleTypeName}}</td>
                                <td>车长</td>
                                <td>{{length}}</td>
                            </tr>
                            <tr>
                                <td>车速</td>
                                <td>{{speed}}</td>
                                <td>行驶方向</td>
                                <td>{{directionName}}</td>
                            </tr>
                            <tr>
                                <td>轴数</td>
                                <td>{{axlesCount}}</td>
                                <td>总重量</td>
                                <td>{{totalWeight}}</td>
                            </tr>
                            <tr>
                                <td>轴1重</td>
                                <td>{{axle1}}</td>
                                <td>轴2重</td>
                                <td>{{axle2}}</td>
                            </tr>
                            <tr>
                                <td>轴3重</td>
                                <td>{{axle3}}</td>
                                <td>轴4重</td>
                                <td>{{axle4}}</td>
                            </tr>
                            <tr>
                                <td>轴5重</td>
                                <td>{{axle5}}</td>
                                <td>轴5重</td>
                                <td>{{axle5}}</td>
                            </tr>
                            <tr>
                                <td>轴6重</td>
                                <td>{{axle6}}</td>
                                <td>轴8重</td>
                                <td>{{axle8}}</td>
                            </tr>
                            <tr>
                                <td>轴9重</td>
                                <td>{{axle9}}</td>
                                <td>轴10重</td>
                                <td>{{axle10}}</td>
                            </tr>
                            <tr>
                                <td>轴间距1</td>
                                <td>{{axleSpace1}}</td>
                                <td>轴间距2</td>
                                <td>{{axleSpace2}}</td>
                            </tr>
                            <tr>
                                <td>轴间距3</td>
                                <td>{{axleSpace3}}</td>
                                <td>轴间距4</td>
                                <td>{{axleSpace4}}</td>
                            </tr>
                            <tr>
                                <td>轴间距5</td>
                                <td>{{axleSpace5}}</td>
                                <td>轴间距6</td>
                                <td>{{axleSpace6}}</td>
                            </tr>
                            <tr>
                                <td>轴间距7</td>
                                <td>{{axleSpace7}}</td>
                                <td>轴间距8</td>
                                <td>{{axleSpace8}}</td>
                            </tr>
                            <tr>
                                <td>轴间距9</td>
                                <td>{{axleSpace9}}</td>
                                <td>是否跨道</td>
                                <td>{{isStraddleName}}</td>
                            </tr>
                            <tr>
                                <td>路面温度</td>
                                <td>{{temperature}}</td>
                                <td>超重量</td>
                                <td>{{overWeight}}</td>
                            </tr>
                            <tr>
                                <td>超重比率</td>
                                <td>{{overWeightRatio}}</td>
                            </tr>
                        </table>
                    </form>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <!--<button type="button" class="btn btn-success" id="xgup_baocun">保存</button>-->
            </div>
        </div>
    </div>
</div>
</div>
<!-- allMsg1 -->
</body>
<script src="../js/jquery.js"></script>
<script src="../js/bootstrap.min.js"></script>
<!--<script src="../js/bootstrap-select.js"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.12.4/js/bootstrap-select.min.js"></script>
<script src="js/echarts.min(1).js" type="text/javascript" charset="utf-8"></script>
<script src="js/datatables/jquery.dataTables.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
<script src="../js/common-scripts.js"></script>
<script src="../js/echartsOptionInit.js"></script>
<script src="js/toastr.js"></script>
<script src="js/myUtil.js"></script>
<script src="../js/myTool.js"></script>
<script>


    $(document).ready(function () {
        initzhandian();
        initchexing();
    });


    let user;

    /* $(function(){
	    $('input:button').click(function(){ $('div').fadeToggle() })
	});  */

    function but2() {
        /* $(document).ready(function(e) {
            $("#but").click(function(e) {
                $("#mydiv").toggle();
            });
        }); */
        $(".mydiv").toggle();

    }

    function initzhandian() {
        $.ajax({
            type: 'POST',
            url: '/login/getUser',
            dataType: 'json',
            async: false,
            data: {},
            error: function (msg) {
            },
            success: function (json) {
                user = json;
                $("#zhandian").html('');
                if (json != null) {
                    if (json.stationPort.indexOf(",") != -1 && json.stationName.indexOf(",") != -1) {
                        let stationPort = json.stationPort.split(",");
                        let stationName = json.stationName.split(",");
                        for (let i = 0; i < stationPort.length; i++) {
                            $("#zhandian").append("<option  value='" + stationPort[i] + "'>" + stationName[i] + "</option>");
                        }
                    } else {
                        $("#zhandian").append("<option  value='" + json.stationPort + "'>" + json.stationName + "</option>");
                    }
                    $(".selectpicker").selectpicker({
                        noneSelectedText: '请选择',
                    });
                    if (user.lastMonitoringSite != null && user.lastMonitoringSite != "" && user.lastMonitoringSite != undefined) {
                        if (user.lastMonitoringSite.indexOf(",") != -1) {
                            $("#zhandian").val(user.lastMonitoringSite.split(","));
                            $('#zhandian').selectpicker('val', user.lastMonitoringSite.split(","));
                        } else {
                            $("#zhandian").val(user.lastMonitoringSite);
                            $('#zhandian').selectpicker('val', user.lastMonitoringSite);
                        }

                    }
                    $("#zhandian").selectpicker("refresh");
                    $('#zhandian').selectpicker('render');
                }
            }
        });
    }

/*    function initchexing() {
        $.ajax({
            type: 'POST',
            url: '/VehicleType/getVehicleType',
            dataType: 'json',
            async: false,
            data: {},
            error: function (msg) {
            },
            success: function (json) {
                $("#chexing").html('');
                if (json != null) {
                    for (let i in json) {
                        $("#chexing").append("<option  value='" + json[i].vehicleTypeId + "'>" + json[i].vehicleTypeName + "</option>");
                    }
                    $(".selectpicker").selectpicker({
                        noneSelectedText: '请选择',
                    });
                    $("#chexing").selectpicker("refresh");
                    $('#chexing').selectpicker('render');
                }
            }
        });
    }*/

    //新建生产计划
    let mainVm = new Vue({
        el: '#mainVm',
        //表单数据
        data: {
            zhandian: [],
            stationPort: "",
            timeRange: "",
            startTime: "",
            endTime: "",
            endWeight: "",
            startWeight: "",
            chexing: "",
            chepai: "",
            chesuStart: "",
            chesuEnd: "",
            zhoushu: "",
            roadTmpStart: "",
            roadTmpEnd: "",
            chaozhongStart: "",
            chaozhongEnd: "",

        },
        methods: {
            //新建生产计划保存按钮事件
            searchInit: function () {
                showMask();
                this.stationPort = $("#zhandian").val() == null ? "" : $("#zhandian").val().toString();
                this.zhoushu = $("#chexing").val() == null ? "" : $("#chexing").val().toString();
                //发送 post 请求  then中第一个function或者箭头函数为success回调函数, 第二个function为失败fail回调函数
                /*                this.$http.post('/tWimMsg/getAlltWimMsgByCondiTion', this._data, {emulateJSON: true}).then((res) => {

                                    $('#mainContent').dataTable().fnClearTable();
                                    $('#mainContent').dataTable().fnServerData()
                                    hidMask();

                                }, (res) => {

                                });*/

                let table = $('#mainContent').dataTable({
                    "deferRender": true,
                    "processing": true,
                    "bDestroy": true,
                    "destroy": true,
                    "serverSide": true,
                    "ajax": {
                        // url可以直接指定远程的json文件，或是MVC的请求地址 /Controller/Action
                        url: "/tWimMsg/getAlltWimMsgByCondiTion",
                        type: 'POST',
                        // 传给服务器的数据，可以添加我们自己的查询参数
                        data: function (param) {
                            param.stationPort = mainVm.stationPort;
                            param.chexing = "";
                            param.startTime = mainVm.startTime;
                            param.endTime = mainVm.endTime;
                            param.endWeight = mainVm.endWeight;
                            param.startWeight = mainVm.startWeight;
                            param.chepai = mainVm.chepai;
                            param.chesuStart = mainVm.chesuStart;
                            param.chesuEnd = mainVm.chesuEnd;
                            param.zhoushu = mainVm.zhoushu;
                            param.roadTmpStart = mainVm.roadTmpStart;
                            param.roadTmpEnd = mainVm.roadTmpEnd;
                            param.chaozhongStart = mainVm.chaozhongStart;
                            param.chaozhongEnd = mainVm.chaozhongEnd;
                            return param;
                        },
                        //用于处理服务器端返回的数据。 dataSrc是DataTable特有的
                        dataSrc: function (myJson) {
                            hidMask();
                            if (myJson.timeout) {
                                return "";
                            }
                            return myJson.data;
                        }
                    },
                    "iDisplayLength": 10,
                    "searching": false,
                    "bLengthChange": false,
                    'paging': true,
                    "oLanguage": {
                        "sSearch": '<span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span>'
                    },
                    "columns": [
                        {"data": "stationName"},
                        {"data": "laneNoName"},
                        {"data": "plate"},
                        {"data": "licensePlateColor"},
                        //{"data": "vehicleTypeName"},
                        {"data": "length"},
                        {"data": "speed"},
                        //{"data": "directionName"},
                        {"data": "axlesCount"},
                        {"data": "totalWeight"},
                        //{"data": "isStraddleName"},
                        {"data": "temperature"},
                        {"data": "overWeightRatioName"},
                        {"data": "evtTime"},

                    ],
                    "columnDefs": [/*{
                        "class": "tcenter",
                        "targets": 0,
                        "searchable": true,
                        "render": function (data, type, full) {
                            return "<marquee scrollAmount=3>" + data + "</marquee>";
                        }
                    }, {
                        "class": "tcenter",
                        "targets": 10,
                        "searchable": true,
                        "render": function (data, type, full) {
                            return "<marquee scrollAmount=3>" + data + "</marquee>";
                        }
                    },*/
                        {
                            "class": "tcenter",
                            "targets": 11,
                            "searchable": true,
                            "render": function (data, type, full) {
                                return '<i class="iconfont icon-icon-test" style="font-size:20px;cursor:pointer;" title="查看详细信息" data-id="' + full.idLocal + '" onclick="lookMsg(this)" id="lookDetall"></i>';
                            }
                        }
                    ],
                    "order": [],
                    "ordering": false,
                    "oLanguage": { //国际化配置
                        "sProcessing": "正在获取数据，请稍后...",
                        "sLengthMenu": "显示 _MENU_ 条",
                        "sZeroRecords": "查询不到相关数据",
                        "sInfo": "从 _START_ 到  _END_ 条记录 总记录数为 _TOTAL_ 条",
                        "sInfoEmpty": "记录数为0",
                        "sInfoFiltered": "(全部记录数 _MAX_ 条)",
                        "sInfoPostFix": "",
                        "sSearch": "搜索",
                        "sLoadingRecords": "载入中...",
                        "sInfoThousands": ",",
                        "sUrl": "",
                        "oPaginate": {
                            "sFirst": "第一页",
                            "sPrevious": "上一页",
                            "sNext": "下一页",
                            "sLast": "最后一页"
                        },
                        "oAria": {
                            "sSortAscending": ": 以升序排列此列",
                            "sSortDescending": ": 以降序排列此列"
                        }

                    },

                });
                /*$('#mainContent').dataTable().fnClearTable();
                $('#mainContent').dataTable().draw();*/
            },
            checknum: function (msg) {
                this._data[msg] = this._data[msg].replace(/[^\d.]/g, '');
                let str = this._data[msg].split('.');
                if (str.length > 2) {
                    this._data[msg] = this._data[msg].substr(0, this._data[msg].length - 1);
                }
            },
            formatTimeRange: function (msg) {
                let timeRange = this.timeRange;
                if(timeRange==""){
                    this.startTime="";
                    this.endTime = "";
                }else{
                const end = new Date();
                const start = new Date();
                start.setTime(start.getTime() - 3600 * 1000 * 24 * timeRange);
                end.setTime(end.getTime() + 3600 * 1000 * 24 * 1);
                this.startTime = start.Format("yyyy-MM-dd");
                this.endTime = end.Format("yyyy-MM-dd");
                }
            },
            init: function () {

            },
        }
    });

    $("#less").click(function () {
        let divV = document.getElementById("Two");
        if (divV.style.display == "none") {
            divV.style.display = "block";
            //$("#Two").attr("style","display:block;");//显示div
        } else {
            divV.style.display = "none";
        }
    })

    function nowJianceSite() {
        $("#jianceTable tbody").empty('')
        if ($("#zhandian").val() != "" && $("#zhandian").val() != undefined && $("#zhandian").val() != null) {
            var text = [];
            var checkParam = $('#zhandian').find('option:selected');
            for (var i = 0; i < checkParam.length; i++) {
                text.push(checkParam[i].textContent);
            }
            for (i in text) {
                $("#jianceTable tbody").append("<tr><td colspan='2'>" + text[i] + "<td></tr>")
                $("#jianceTable tbody").find("td:last").hide()
            }
        } else {
            $("#zhandian option").each(function () {
                //遍历所有option
                var value = $(this).val();   //获取option值
                var text = $(this).text();
                if (text != '') {
                    $("#jianceTable tbody").append("<tr><td colspan='2'>" + text + "<td></tr>")
                    $("#jianceTable tbody").find("td:last").hide()
                }
            })
        }

    }

    var looktWimMsg = new Vue({
        el: '#lookWimMsgDiv',
        //表单数据
        data: {
            idLocal:"",
            id:"",
            stationId:"",
            evtTime:"",
            msgTime:"",
            laneNo:"",
            plate:"",
            plateColor:"",
            classIndex:"",
            length:"",
            speed:"",
            direction:"",
            axlesCount:"",
            totalWeight:'',
            wetmixingtimedeviation:'',
            axle1:'',
            axle2:'',
            axle3:'',
            axle4:'',
            axle5:'',
            axle6:'',
            axle7:'',
            axle8:'',
            axle9:'',
            axle10:'',
            axleSpace1:'',
            axleSpace2:'',
            axleSpace3:'',
            axleSpace4:'',
            axleSpace5:'',
            axleSpace6:'',
            axleSpace7:'',
            axleSpace8:'',
            axleSpace9:'',
            isStraddle:'',
            temperature:'',
            overWeight:'',
            overWeightRatio:'',
            wIMId:'',
            lPRId:'',
            stationIP:'',
            stationNameRouteName:'',
            directionName:'',
            isStraddleName:'',
            stationName:'',
            routeName:'',
            licensePlateColor:'',
            vehicleTypeName:'',
        },
        methods: {
        }
    })

    var lookMsg = (e)=>{
        showMask()
        $.ajax({
            type: 'POST',
            url: '/tWimMsg/gettWimMsgById',
            dataType: 'json',
            data: {
                idLocal:$(e).attr("data-id")
            },
            error: function (msg) {
                errMessage("请求UserController失败");
            },
            success: function (json) {
                lookxiangqing(json);
                hidMask()
                $("#allMsg1").modal('show');
            }
        });
    }

    var lookxiangqing = (data) =>{
        looktWimMsg.id=data.id;
        looktWimMsg.idLocal=data.idLocal;
        looktWimMsg.stationNameRouteName=data.stationNameRouteName;
        looktWimMsg.stationId=data.stationId;
        looktWimMsg.evtTime=data.evtTime;
        looktWimMsg.msgTime=data.msgTime;
        looktWimMsg.laneNo=data.laneNo;
        looktWimMsg.plate=data.plate;
        looktWimMsg.plateColor=data.plateColor;
        looktWimMsg.classIndex=data.classIndex;
        looktWimMsg.length=data.length;
        looktWimMsg.speed=data.speed;
        looktWimMsg.direction=data.direction;
        looktWimMsg.axlesCount=data.axlesCount;
        looktWimMsg.totalWeight=data.totalWeight;
        looktWimMsg.wetmixingtimedeviation=data.wetmixingtimedeviation;
        looktWimMsg.axle1=data.axle1;
        looktWimMsg.axle2=data.axle2;
        looktWimMsg.axle3=data.axle3;
        looktWimMsg.axle4=data.axle4;
        looktWimMsg.axle5=data.axle5;
        looktWimMsg.axle6=data.axle6;
        looktWimMsg.axle7=data.axle7;
        looktWimMsg.axle8=data.axle8;
        looktWimMsg.axle9=data.axle9;
        looktWimMsg.axle10=data.axle10;
        looktWimMsg.axleSpace1=data.axleSpace1;
        looktWimMsg.axleSpace2=data.axleSpace2;
        looktWimMsg.axleSpace3=data.axleSpace3;
        looktWimMsg.axleSpace4=data.axleSpace4;
        looktWimMsg.axleSpace5=data.axleSpace5;
        looktWimMsg.axleSpace6=data.axleSpace6;
        looktWimMsg.axleSpace7=data.axleSpace7;
        looktWimMsg.axleSpace8=data.axleSpace8;
        looktWimMsg.axleSpace9=data.axleSpace9;
        looktWimMsg.isStraddle=data.isStraddle;
        looktWimMsg.temperature=data.temperature;
        looktWimMsg.overWeight=data.overWeight;
        looktWimMsg.overWeightRatio=data.overWeightRatio+'%';
        looktWimMsg.wIMId=data.wIMId;
        looktWimMsg.lPRId=data.lPRId;
        looktWimMsg.stationIP=data.stationIP;
        looktWimMsg.stationNameRouteName=data.stationNameRouteName;
        looktWimMsg.directionName=data.directionName;
        looktWimMsg.isStraddleName=data.isStraddleName;
        looktWimMsg.stationName=data.stationName;
        looktWimMsg.routeName=data.routeName;
        looktWimMsg.licensePlateColor=data.licensePlateColor;
        looktWimMsg.vehicleTypeName=data.vehicleTypeName;

    }


    function showMask() {
        myTool.mask.show('查询中...');
    }

    function hidMask() {
        myTool.mask.hide();
    }

    mainVm.searchInit();

</script>


</html>