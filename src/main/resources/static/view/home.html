<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>首页</title>
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="./css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <style>
        .main-table tr td{padding:3px;}
        .main-table .red{color:red;}

        @media screen and (min-width: 1920px) {
            .righttop{
                margin-top: -20% !important;
            }
            .righttop{
                top:200px !important;
            }
            .rightbottom span{
                margin-top: 1% !important;
            }
        }
    </style>
</head>
<body class="jd">
<div class="head" style="height: 100px;width: 100%;"></div>
<div class="leftdiv col-xs-3">
    <h2 class="jianceh" style="font-size: 19px;color:#007AFF;font-weight: bolder;">监测站点实时统计</h2>
    <div class="leftsj">
        <div class="leftfirst">
            <img src="img/first_img.png" style="height: 40px;">
            <p class="leftp" id="leftTable1"></p><span>辆</span>
            <p style="color: #A4A5B0;margin-left: 11%;font-weight: bolder;margin-top: -2%;">当前总流量</p>
        </div>
        <div class="leftsec">
            <img src="./img/second_img.png" style="height: 40px;">
            <p class="leftp" id="leftTable2"></p><span>辆</span>
            <p style="color: #A4A5B0;margin-left: 11%;font-weight: bolder;margin-top: -2%;">当前超载车辆数</p>
        </div>
        <div class="leftth">
            <img src="img/third_img.png" style="height: 40px;">
            <p class="leftp" id="leftTable3"></p><span>吨</span>
            <p style="color: #A4A5B0;margin-left: 11%;font-weight: bolder;margin-top: -2%;">当前最大车重</p>
        </div>
        <div class="leftfou">
            <img src="img/first_img.png" style="height: 40px;">
            <p class="leftp" id="leftTable4"></p><span>个</span>
            <p style="color: #A4A5B0;margin-left: 11%;font-weight: bolder;margin-top: -2%;">当前监测站点</p>
        </div>
        <div class="y-span10 y-last">
            <div class="table">
                <div class="bj_nav y-clearfix">
                    <div>
                        <div id="main" style="height:500px;width:100%;margin:0 15px;float:left;margin-left: -28%;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- 左边结束 -->
<div class="centerdiv col-xs-4">
    <div class="topcenter">
        <div class="bg">
            <h2 class="dangqianche" style="font-size: 17px;color:#007AFF;font-weight: bolder; padding: 10px;">当前车流量统计</h2>
        </div>
        <div class="bz">
            <span style="float: left; margin-left: 2%;">站点排名</span>
            <span style="float: right;margin-right: 3%;">流量统计</span>
        </div>
        <div id="xian1" style="height:380px;top: -45px;">
        </div>
    </div>
    <div class="bottomcenter">
        <div class="bg" style="margin-top: -8%;">
            <h2 class="dangqianche" style="font-size: 16px;font-weight: bolder; padding: 10px;">当前车辆超载比例统计</h2>
        </div>
        <div id="xian" style="height:360px;top: -45px;">
            <div id="huan0" class="col-xs-4" style="height: 160px;position: absolute;"></div>
            <div id="huan1" class="col-xs-4" style="height: 160px;position: absolute; margin-left: 30%;"></div>
            <div id="huan2" class="col-xs-4" style="height: 160px;float: right;position: absolute;right: 0;">
            </div>
            <div class="ecs" style="margin-top: 30%;">
                <div id="huan3" class="col-xs-4" style="height: 160px;position: absolute;"></div>
                <div id="huan4" class="col-xs-4" style="height: 160px;position: absolute; margin-left: 30%;"></div>
                <div id="huan5" class="col-xs-4" style="height: 160px;position: absolute;right: 0;"></div>
            </div>
        </div>
    </div>
</div>
<!-- 中间结束 -->
<div class="right col-xs-3">
    <div class="bg">
        <h2 class="dangqianche" style="font-size: 17px;color:#007AFF;font-weight: bolder;padding: 10px;">当前车辆预警统计</h2>
    </div>
    <div class="righttop" style="margin-top: -10%;position: relative;">
        <div id="by" class="col-xs-4" style="height:200px;position: absolute;float: left;"></div>
        <div id="byf" class="col-xs-4" style="height:200px;margin-left:32%;position: absolute;"></div>
        <div id="by2" class="col-xs-4" style="height:200px;float: right;"></div>
    </div>
    <div class="ert" style="margin-top: 40%;position: relative;">
        <div id="by3" class="col-xs-4" style="height:200px;position: absolute;"></div>
        <div id="by4"  class="col-xs-4"style="height:200px;position: absolute;margin-left: 32%;"></div>
        <div id="by5"  class="col-xs-4"style="height:200px;position: absolute;right: 0;"></div>
    </div>
    <div class="rightbottom" style="clear: both; position: relative;top: 140px;">
        <p style="font-size: 17px;color: #FFF;margin-top:10%;" class="col-xs-8">当前最大车重<span style="color: #FE545E;font-size: 25px;background-color:#131A50;padding: 1.5%;margin: 1%;">109</span>吨</p>

    </div>
    <div id="liti" class="col-xs-12" style="height: 325px; margin-top: 43%;">
    </div>
</div>
</body>
<script src="js/jquery.min.js" type="text/javascript" charset="utf-8"></script>
<script src="js/homeEcharts.js" type="text/javascript" charset="utf-8"></script>
<script src="js/echarts.min(1).js" type="text/javascript" charset="utf-8"></script>
<script src="js/build/dist/echarts.js" type="text/javascript" charset="utf-8"></script>


<script type="text/javascript">
    require.config({
        paths: {
            echarts: 'js/build/dist'
        }
    });

    // 使用
    require(
        [
            'echarts',
            'echarts/chart/map'
        ],
        function(ec) {
            require('echarts/util/mapData/params').params.jiangsu = {

                getGeoJson: function(callback) {
                    $.getJSON('geoJson/jiangsu.json', function(data) {
                        // 压缩后的地图数据必须使用 decode 函数转换
                        callback(require('echarts/util/mapData/params').decode(data));
                    });
                }
            }
            var myChart = ec.init(document.getElementById('main'));
            var ecConfig = require('echarts/config');
            var zrEvent = require('zrender/tool/event');
            var curIndx = 0;
            var mapType = ["江苏"];


            myChart.on(ecConfig.EVENT.MAP_SELECTED, function(param) {});
            option = {

                tooltip: {
                    trigger: 'item',
                    //formatter:'dede{b}'
                    formatter: function(param) {}
                },
                legend: {
                    orient: 'vertical',
                    x: '',
                    data: [' ']
                },

                series: [{
                    name: '',
                    type: 'map',
                    mapType: 'jiangsu',
                    selectedMode: false,
                    itemStyle: {
                        normal: {
                            label: {
                                show: true
                            },
                            borderColor: 'rgb(71,160,192)',
                            borderWidth: 1
                        },
                        emphasis: {
                            label: {
                                show: false
                            }
                        }
                    },
                    data: [
                    ],
                   
                    markPoint: {
                        symbol: 'emptyCircle',
                        symbolSize: 15,
                        itemStyle: {
                            normal: {
                                borderColor: '#f34010',
                                borderWidth: 1, // 标注边线线宽，单位px，默认为1
                                label: {
                                    show: true
                                }
                            },
                            emphasis: {
                                borderColor: '#bc2e08',
                                borderWidth: 5,
                                label: {
                                    show: true
                                }
                            }
                        },
                        effect: {
                            show: true,
                            shadowBlur: 0,
                            loop: true
                        },
                        data: [
                        ]
                    }

                }]
            }
            myChart.setOption(option);
        }
    );


    //初始化车流量
    homePageInit.initLeftEcharts('xian1');

    //初始化环形图0
    homePageInit.initDownEcharts();

    //初始化左侧总数据
    homePageInit.initHomeData();
    setInterval(refresh, 1000);
    setInterval(refreshLeft, 4000);

    function refresh() {
        homePageInit.initLeftEcharts('xian1');
        homePageInit.initDownEcharts();
        //
    }

    function refreshLeft() {
        homePageInit.initHomeData();
    }

    // 扇形

    var myChart = echarts.init(document.getElementById("by"));
    var option = {
        title: {
            text: 'G15-苏鲁省界',
            show: true,
            x: "center",
            y: "bottom",
            textStyle: {
                color: '#a3a6b4',
                fontSize: 13,
                fontWeight: 'bold'
            },
            left: 'center',
            top: '90%',
            bottom: '69%',
            itemGap: 60,
        },
        tooltip: {
            show: false,
        },
        color: ['#B7DD7'],
        legend: {
            orient: 'vertical',
            x: 690,
            y: 120,
            data: ['www'],

        },
        series: [{
            type: 'pie',
            //起始刻度的角度，默认为 90 度，即圆心的正上方。0 度为圆心的正右方。
            startAngle: 0,
            hoverAnimation: false,
            tooltip: {},
            radius: ["30%", "47%"],
            center: ['50%', '80%'],
            label: {
                normal: {
                    show: true,
                    position: 'center',
                    color: '#fff',
                    formatter: function(params) {
                        return params.value
                    },
                },
            },
            labelLine: {
                normal: {
                    show: false
                }
            },
            data: [{
                value: 4,
                itemStyle: {
                    normal: {
                        color: "rgba(80,150,224,0)"
                    }
                }
            },

            ]
        },
            {
                type: 'pie',
                startAngle: 0,
                hoverAnimation: false,
                radius: ["70%", "87%"],
                center: ['50%', '80%'],
                label: {
                    normal: {
                        show: false,
                        position: 'center'
                    },
                    emphasis: {
                        show: true,
                        textStyle: {
                            fontSize: '10',
                            fontWeight: 'bold'
                        }
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    }
                },
                data: [{
                    value: 300,
                    itemStyle: {
                        normal: {
                            color: "rgba(1,218,220,0)"
                        }
                    }
                },
                    {
                        value: 240,
                        itemStyle: {
                            normal: {
                                color: "rgba(1,218,220,1)"
                            }
                        }

                    },
                    {
                        value: 60,
                        itemStyle: {
                            normal: {
                                color: "rgba(1,218,220,0.1)"
                            }
                        }
                    },
                ]
            }
        ]
    };
    myChart.setOption(option);


    var myChart = echarts.init(document.getElementById("byf"));
    var option = {
        title: {
            text: 'G25-苏鲁临连省',
            show: true,
            x: "center",
            y: "bottom",
            textStyle: {
                color: '#a3a6b4',
                fontSize: 13,
                fontWeight: 'bold'
            },
            left: 'center',
            top: '90%',
            bottom: '69%',
            itemGap: 60,
        },
        tooltip: {
            show: false,
        },
        color: ['#B7DD7'],
        legend: {
            orient: 'vertical',
            x: 690,
            y: 120,
            data: ['www'],

        },
        series: [{
            type: 'pie',
            //起始刻度的角度，默认为 90 度，即圆心的正上方。0 度为圆心的正右方。
            startAngle: 0,
            hoverAnimation: false,
            tooltip: {},
            radius: ["30%", "47%"],
            center: ['50%', '80%'],
            label: {
                normal: {
                    show: true,
                    position: 'center',
                    color: '#fff',
                    formatter: function(params) {
                        return params.value
                    },
                },
            },
            labelLine: {
                normal: {
                    show: false
                }
            },
            data: [{
                value: 3,
                itemStyle: {
                    normal: {
                        color: "rgba(80,150,224,0)"
                    }
                }
            },

            ]
        },
            {
                type: 'pie',
                startAngle: 0,
                hoverAnimation: false,
                radius: ["70%", "87%"],
                center: ['50%', '80%'],
                label: {
                    normal: {
                        show: false,
                        position: 'center'
                    },
                    emphasis: {
                        show: true,
                        textStyle: {
                            fontSize: '10',
                            fontWeight: 'bold'
                        }
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    }
                },
                data: [{
                    value: 300,
                    itemStyle: {
                        normal: {
                            color: "rgba(1,218,220,0)"
                        }
                    }
                },
                    {
                        value: 240,
                        itemStyle: {
                            normal: {
                                color: "rgba(1,218,220,1)"
                            }
                        }

                    },
                    {
                        value: 60,
                        itemStyle: {
                            normal: {
                                color: "rgba(1,218,220,0.1)"
                            }
                        }
                    },
                ]
            }
        ]
    };
    myChart.setOption(option);

    var myChart = echarts.init(document.getElementById("by2"));
    var option = {
        title: {
            text: 'G25-苏鲁临连省',
            show: true,
            x: "center",
            y: "bottom",
            textStyle: {
                color: '#a3a6b4',
                fontSize: 13,
                fontWeight: 'bold'
            },
            left: 'center',
            top: '90%',
            bottom: '69%',
            itemGap: 60,
        },
        tooltip: {
            show: false,
        },
        color: ['#B7DD7'],
        legend: {
            orient: 'vertical',
            x: 690,
            y: 120,
            data: ['www'],

        },
        series: [{
            type: 'pie',
            //起始刻度的角度，默认为 90 度，即圆心的正上方。0 度为圆心的正右方。
            startAngle: 0,
            hoverAnimation: false,
            tooltip: {},
            radius: ["30%", "47%"],
            center: ['50%', '80%'],
            label: {
                normal: {
                    show: true,
                    position: 'center',
                    color: '#fff',
                    formatter: function(params) {
                        return params.value
                    },
                },
            },
            labelLine: {
                normal: {
                    show: false
                }
            },
            data: [{
                value: 3,
                itemStyle: {
                    normal: {
                        color: "rgba(80,150,224,0)"
                    }
                }
            },

            ]
        },
            {
                type: 'pie',
                startAngle: 0,
                hoverAnimation: false,
                radius: ["70%", "87%"],
                center: ['50%', '80%'],
                label: {
                    normal: {
                        show: false,
                        position: 'center'
                    },
                    emphasis: {
                        show: true,
                        textStyle: {
                            fontSize: '10',
                            fontWeight: 'bold'
                        }
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    }
                },
                data: [{
                    value: 300,
                    itemStyle: {
                        normal: {
                            color: "rgba(1,218,220,0)"
                        }
                    }
                },
                    {
                        value: 240,
                        itemStyle: {
                            normal: {
                                color: "rgba(1,218,220,1)"
                            }
                        }

                    },
                    {
                        value: 60,
                        itemStyle: {
                            normal: {
                                color: "rgba(1,218,220,0.1)"
                            }
                        }
                    },
                ]
            }
        ]
    };
    myChart.setOption(option);

    // 下排环形
    var myChart = echarts.init(document.getElementById("by3"));
    var option = {
        title: {
            text: 'G15-苏鲁省界',
            show: true,
            x: "center",
            y: "bottom",
            textStyle: {
                color: '#a3a6b4',
                fontSize: 13,
                fontWeight: 'bold'
            },
            left: 'center',
            top:'90%',
            bottom: '69%',
            itemGap: 60,
        },
        tooltip: {
            show: false,
        },
        color: ['#B7DD7'],
        legend: {
            orient: 'vertical',
            x: 690,
            y:120,
            data:['www'],

        },
        series: [{
            type: 'pie',
            //起始刻度的角度，默认为 90 度，即圆心的正上方。0 度为圆心的正右方。
            startAngle: 0,
            hoverAnimation: false,
            tooltip: {
            },
            radius: ["30%", "47%"],
            center: ['50%', '80%'],
            label: {
                normal: {
                    show: true,
                    position: 'center',
                    color: '#fff',
                    formatter: function(params) {
                        return params.value
                    },
                },
            },
            labelLine: {
                normal: {
                    show: false
                }
            },
            data: [{
                value: 4,
                itemStyle: {
                    normal: {
                        color: "rgba(80,150,224,0)"
                    }
                }
            },

            ]
        },
            {
                type: 'pie',
                startAngle: 0,
                hoverAnimation: false,
                radius: ["70%", "87%"],
                center: ['50%', '80%'],
                label: {
                    normal: {
                        show: false,
                        position: 'center'
                    },
                    emphasis: {
                        show: true,
                        textStyle: {
                            fontSize: '10',
                            fontWeight: 'bold'
                        }
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    }
                },
                data: [{
                    value: 300,
                    itemStyle: {
                        normal: {
                            color: "rgba(1,218,220,0)"
                        }
                    }
                },
                    {
                        value: 240,
                        itemStyle: {
                            normal: {
                                color: "rgba(1,218,220,1)"
                            }
                        }

                    },
                    {
                        value: 60,
                        itemStyle: {
                            normal: {
                                color: "rgba(1,218,220,0.1)"
                            }
                        }
                    },
                ]
            }
        ]
    };
    myChart.setOption(option);

    var myChart = echarts.init(document.getElementById("by4"));
    var option = {
        title: {
            text: 'G25-苏鲁临连省',
            show: true,
            x: "center",
            y: "bottom",
            textStyle: {
                color: '#a3a6b4',
                fontSize: 13,
                fontWeight: 'bold'
            },
            left: 'center',
            top:'90%',
            bottom: '69%',
            itemGap: 60,
        },
        tooltip: {
            show: false,
        },
        color: ['#B7DD7'],
        legend: {
            orient: 'vertical',
            x: 690,
            y:120,
            data:['www'],

        },
        series: [{
            type: 'pie',
            //起始刻度的角度，默认为 90 度，即圆心的正上方。0 度为圆心的正右方。
            startAngle: 0,
            hoverAnimation: false,
            tooltip: {
            },
            radius: ["30%", "47%"],
            center: ['50%', '80%'],
            label: {
                normal: {
                    show: true,
                    position: 'center',
                    color: '#fff',
                    formatter: function(params) {
                        return params.value
                    },
                },
            },
            labelLine: {
                normal: {
                    show: false
                }
            },
            data: [{
                value: 3,
                itemStyle: {
                    normal: {
                        color: "rgba(80,150,224,0)"
                    }
                }
            },

            ]
        },
            {
                type: 'pie',
                startAngle: 0,
                hoverAnimation: false,
                radius: ["70%", "87%"],
                center: ['50%', '80%'],
                label: {
                    normal: {
                        show: false,
                        position: 'center'
                    },
                    emphasis: {
                        show: true,
                        textStyle: {
                            fontSize: '10',
                            fontWeight: 'bold'
                        }
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    }
                },
                data: [{
                    value: 300,
                    itemStyle: {
                        normal: {
                            color: "rgba(1,218,220,0)"
                        }
                    }
                },
                    {
                        value: 240,
                        itemStyle: {
                            normal: {
                                color: "rgba(1,218,220,1)"
                            }
                        }

                    },
                    {
                        value: 60,
                        itemStyle: {
                            normal: {
                                color: "rgba(1,218,220,0.1)"
                            }
                        }
                    },
                ]
            }
        ]
    };
    myChart.setOption(option);

    var myChart = echarts.init(document.getElementById("by5"));
    var option = {
        title: {
            text: 'G25-苏鲁临连省',
            show: true,
            x: "center",
            y: "bottom",
            textStyle: {
                color: '#a3a6b4',
                fontSize: 13,
                fontWeight: 'bold'
            },
            left: 'center',
            top:'90%',
            bottom: '69%',
            itemGap: 60,
        },
        tooltip: {
            show: false,
        },
        color: ['#B7DD7'],
        legend: {
            orient: 'vertical',
            x: 690,
            y:120,
            data:['www'],

        },
        series: [{
            type: 'pie',
            //起始刻度的角度，默认为 90 度，即圆心的正上方。0 度为圆心的正右方。
            startAngle: 0,
            hoverAnimation: false,
            tooltip: {
            },
            radius: ["30%", "47%"],
            center: ['50%', '80%'],
            label: {
                normal: {
                    show: true,
                    position: 'center',
                    color: '#fff',
                    formatter: function(params) {
                        return params.value
                    },
                },
            },
            labelLine: {
                normal: {
                    show: false
                }
            },
            data: [{
                value: 3,
                itemStyle: {
                    normal: {
                        color: "rgba(80,150,224,0)"
                    }
                }
            },

            ]
        },
            {
                type: 'pie',
                startAngle: 0,
                hoverAnimation: false,
                radius: ["70%", "87%"],
                center: ['50%', '80%'],
                label: {
                    normal: {
                        show: false,
                        position: 'center'
                    },
                    emphasis: {
                        show: true,
                        textStyle: {
                            fontSize: '10',
                            fontWeight: 'bold'
                        }
                    }
                },
                labelLine: {
                    normal: {
                        show: false
                    }
                },
                data: [{
                    value: 300,
                    itemStyle: {
                        normal: {
                            color: "rgba(1,218,220,0)"
                        }
                    }
                },
                    {
                        value: 240,
                        itemStyle: {
                            normal: {
                                color: "rgba(1,218,220,1)"
                            }
                        }

                    },
                    {
                        value: 60,
                        itemStyle: {
                            normal: {
                                color: "rgba(1,218,220,0.1)"
                            }
                        }
                    },
                ]
            }
        ]
    };
    myChart.setOption(option);

    var myChart = echarts.init(document.getElementById("liti"));
    var option = {	
    		color: ['#6154FD','#FE545E'],
    		
    		 textStyle: {
                 color: '#fff',
                 fontSize: 13
             },
    	    tooltip: {
    	        trigger: 'axis',
    	        axisPointer: {
    	            type: 'cross'
    	        }
    	    },
    	    
    	    legend: {
    	        data: ['二级预警(≥80吨)', '三级预警(≥100吨)'],
    	        right: 10,
    	        orient: 'vertical',  //垂直显示
    	        textStyle: {
                    color: '#17447E',
                    fontSize: 13
                },
                
    	    },
    	    xAxis: [
    	        {
    	            type: 'category',
    	            data: ['G25苏鲁临连省界', 'G25苏鲁临连省界', 'G25苏鲁临连省界', 'G25苏鲁临连省界', 'G25苏鲁临连省界', 'G25苏鲁临连省界'],
    	            axisLabel : {
    	                formatter : function(params){
    	                   var newParamsName = "";
    	                            var paramsNameNumber = params.length;
    	                            var provideNumber = 3;
    	                            var rowNumber = Math.ceil(paramsNameNumber / provideNumber);
    	                            if (paramsNameNumber > provideNumber) {
    	                                for (var p = 0; p < rowNumber; p++) {
    	                                    var tempStr = "";
    	                                    var start = p * provideNumber;
    	                                    var end = start + provideNumber;
    	                                    if (p == rowNumber - 1) {
    	                                        tempStr = params.substring(start, paramsNameNumber);
    	                                    } else {
    	                                        tempStr = params.substring(start, end) + "\n";
    	                                    }
    	                                    newParamsName += tempStr;
    	                                }

    	                            } else {
    	                                newParamsName = params;
    	                            }
    	                            return newParamsName
    	                }

    	            },
    	        }
    	    ],
    	    yAxis: [
    	        {
    	            show:false,
    	            type: 'value'
    	        },
    	        
    	    ],
    	    series: [
    	        {
    	            name: '二级预警(≥80吨)',
    	            type: 'bar',
    	            data: [122, 112, 7.0, 23.2, 25.6, 76.7],
    	            barWidth : 20,//柱图宽度
    	        },
    	        {
    	            name: '三级预警(≥100吨)',
    	            type: 'bar',
    	            data: [2.6, 5.9, 9.0, 26.4, 28.7,76.7],
    	            barWidth : 20,//柱图宽度
    	        }
    	    ]
    	};


    myChart.setOption(option);

</script> 

</html>
